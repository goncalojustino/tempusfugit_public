# Tempusfugit

Tempusfugit is a Dockerized reservation + operations platform built for managing shared scientific instruments (e.g., NMR spectrometers). It pairs a Fastify/Node.js API with a Vite/React front-end, backed by Postgres and complemented by automated backup tooling.

## Key Features
- Role-based access (USER/STAFF/DANTE) with tokenized authentication, registration, and reset flows.
- Rich booking engine enforcing slot templates, approvals, maintenance blocks, pricing, and cancellation policies.
- Admin portal ("Nine Circles") for configuring resources, labs, probes, experiments, pricing, bulletins, broadcasts, impersonation, and backup operations.
- Mobile-friendly UI and public display board for at-a-glance schedules.
- SMTP notifications for approvals, denials, broadcasts, contact forms, and error alerts.
- Automated backups (code + database) with a dedicated console for on-demand snapshots and downloads.

## Documentation
- [Specification](docs/specification.md)
- [Install & Admin Guide](docs/install-admin-guide.md)
- [User Guide](docs/user-guide.md)
- [Palette Reference](docs/PALETTE.md)

## Quick Start
1. Clone the repository.
2. Copy `.env` and fill the required secrets (database URL, session secret, SMTP settings, etc.).
3. Update `docker-compose.yml` placeholders (`ALLOWED_ORIGINS`, `PUBLIC_URL`, `ADMIN_EMAILS`).
4. Build and launch:
   ```bash
   docker compose up -d --build
   ```
5. Access the UI via the configured public URL. Use the seeded admin email from `db/init/003_seed.sql` and complete the reset flow to set a passcode.

### Development Tips
- API code lives in `api/`; run locally with `npm install && npm run dev` if needed.
- Front-end lives in `web/`; `npm install && npm run dev` launches Vite.
- `web/dist/` is generated by the Docker `webbuild` stage; rebuild after editing branding/text so the bundle matches source.

## Backups & Ops
- Automated cron backups are handled by `ops/backup_service` (see `docs/install-admin-guide.md`).
- `ops/console_service` exposes a web console (authenticated via JWT) for triggering/listing/downloading backups.
- Manual scripts: `ops/backup.sh` (quick DB dump) and `ops/restore.sh` (restore from dump).

## Contributing
1. Fork and create a feature branch.
2. Run lint/tests relevant to the module (API or web) and ensure Docker builds succeed.
3. Submit a PR referencing any related issue. Avoid committing secrets or production data; keep `.env`, backups, and logs out of version control.

## License
Tempusfugit is released under the MIT License. See `LICENSE` for the full text and attribution requirements.

## Citation
If you use this tool, please cite it as:

G. Justino, *TempusFugit*, Zenodo (2025).  
https://doi.org/10.5281/zenodo.18076982



[![DOI](https://zenodo.org/badge/1124224154.svg)](https://doi.org/10.5281/zenodo.18076982)

